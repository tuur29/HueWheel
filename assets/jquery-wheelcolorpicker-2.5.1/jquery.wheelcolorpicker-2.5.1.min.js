/**
 * jQuery Wheel Color Picker 2.5.1
 * 
 * http://www.jar2.net/projects/jquery-wheelcolorpicker
 * 
 * Author : Fajar Chandra
 * Date   : 2016.01.04
 * 
 * Copyright Â© 2011-2016 Fajar Chandra. All rights reserved.
 * Released under MIT License.
 * http://www.opensource.org/licenses/mit-license.php
 */
!function(e){var t={},a={},r=null,s=null,i={left:0,top:0},l=!1;e.fn.wheelColorPicker=function(){if(0==arguments.length)return t.setOptions.call(this,{});if("object"==typeof arguments[0])return t.setOptions.call(this,arguments[0]);if(e.isFunction(t[arguments[0]])){var a=[].shift,r=a.apply(arguments);return t[r].apply(this,arguments)}return 2==arguments.length?t.setOption.call(this,arguments[0],arguments[1]):1==arguments.length?t.getOption.call(this,arguments[0]):void e.error("Method/option named "+arguments[0]+" does not exist on jQuery.wheelColorPicker")},e.fn.wheelColorPicker.defaults={format:"hex",preview:!1,live:!0,userinput:!0,validate:!1,autoConvert:!0,color:null,alpha:null,preserveWheel:!1,interactive:!0,cssClass:"",layout:"popup",animDuration:200,quality:1,sliderWidth:1,sliders:null,showSliderLabel:!0,showSliderValue:!1,rounding:2,mobile:!0,hideKeyboard:!1,htmlOptions:!0,snap:!1,snapTolerance:.05},e.fn.wheelColorPicker.hasInit=!1,e.fn.wheelColorPicker.colorToStr=function(e,t){var a="";switch(t){case"css":a="#";case"hex":var r=Math.round(255*e.r).toString(16);1==r.length&&(r="0"+r);var s=Math.round(255*e.g).toString(16);1==s.length&&(s="0"+s);var i=Math.round(255*e.b).toString(16);1==i.length&&(i="0"+i),a+=r+s+i;break;case"rgb":a="rgb("+Math.round(255*e.r)+","+Math.round(255*e.g)+","+Math.round(255*e.b)+")";break;case"rgb%":a="rgb("+100*e.r+"%,"+100*e.g+"%,"+100*e.b+"%)";break;case"rgba":a="rgba("+Math.round(255*e.r)+","+Math.round(255*e.g)+","+Math.round(255*e.b)+","+e.a+")";break;case"rgba%":a="rgba("+100*e.r+"%,"+100*e.g+"%,"+100*e.b+"%,"+100*e.a+"%)";break;case"hsv":a="hsv("+360*e.h+","+e.s+","+e.v+")";break;case"hsv%":a="hsv("+100*e.h+"%,"+100*e.s+"%,"+100*e.v+"%)";break;case"hsva":a="hsva("+360*e.h+","+e.s+","+e.v+","+e.a+")";break;case"hsva%":a="hsva("+100*e.h+"%,"+100*e.s+"%,"+100*e.v+"%,"+100*e.a+"%)";break;case"hsb":a="hsb("+e.h+","+e.s+","+e.v+")";break;case"hsb%":a="hsb("+100*e.h+"%,"+100*e.s+"%,"+100*e.v+"%)";break;case"hsba":a="hsba("+e.h+","+e.s+","+e.v+","+e.a+")";break;case"hsba%":a="hsba("+100*e.h+"%,"+100*e.s+"%,"+100*e.v+"%,"+100*e.a+"%)"}return a},e.fn.wheelColorPicker.strToColor=function(e){var t,a,r={a:1};if(null!=e.match(/^#[0-9a-f]{6}$/i)){if(isNaN(r.r=parseInt(e.substr(1,2),16)/255))return!1;if(isNaN(r.g=parseInt(e.substr(3,2),16)/255))return!1;if(isNaN(r.b=parseInt(e.substr(5,2),16)/255))return!1}else if(null!=e.match(/^[0-9a-f]{6}$/i)){if(isNaN(r.r=parseInt(e.substr(0,2),16)/255))return!1;if(isNaN(r.g=parseInt(e.substr(2,2),16)/255))return!1;if(isNaN(r.b=parseInt(e.substr(4,2),16)/255))return!1}else if(null!=e.match(/^rgba\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)||null!=e.match(/^rgb\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)){if(a=null!=e.match(/a/i)?!0:!1,t=e.substring(e.indexOf("(")+1,e.indexOf(",")),"%"==t.charAt(t.length-1)){if(isNaN(r.r=parseFloat(t)/100))return!1}else if(isNaN(r.r=parseInt(t)/255))return!1;if(t=e.substring(e.indexOf(",")+1,e.indexOf(",",e.indexOf(",")+1)),"%"==t.charAt(t.length-1)){if(isNaN(r.g=parseFloat(t)/100))return!1}else if(isNaN(r.g=parseInt(t)/255))return!1;if(t=a?e.substring(e.indexOf(",",e.indexOf(",")+1)+1,e.lastIndexOf(",")):e.substring(e.lastIndexOf(",")+1,e.lastIndexOf(")")),"%"==t.charAt(t.length-1)){if(isNaN(r.b=parseFloat(t)/100))return!1}else if(isNaN(r.b=parseInt(t)/255))return!1;if(a)if(t=e.substring(e.lastIndexOf(",")+1,e.lastIndexOf(")")),"%"==t.charAt(t.length-1)){if(isNaN(r.a=parseFloat(t)/100))return!1}else if(isNaN(r.a=parseFloat(t)))return!1}else{if(null==e.match(/^hsva\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)&&null==e.match(/^hsv\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)&&null==e.match(/^hsba\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i)&&null==e.match(/^hsb\s*\(\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*,\s*([0-9\.]+%|[01]?\.?[0-9]*)\s*\)$/i))return!1;if(a=null!=e.match(/a/i)?!0:!1,t=e.substring(e.indexOf("(")+1,e.indexOf(",")),"%"==t.charAt(t.length-1)){if(isNaN(r.h=parseFloat(t)/100))return!1}else if(isNaN(r.h=parseFloat(t)/360))return!1;if(t=e.substring(e.indexOf(",")+1,e.indexOf(",",e.indexOf(",")+1)),"%"==t.charAt(t.length-1)){if(isNaN(r.s=parseFloat(t)/100))return!1}else if(isNaN(r.s=parseFloat(t)))return!1;if(t=a?e.substring(e.indexOf(",",e.indexOf(",")+1)+1,e.lastIndexOf(",")):e.substring(e.lastIndexOf(",")+1,e.lastIndexOf(")")),"%"==t.charAt(t.length-1)){if(isNaN(r.v=parseFloat(t)/100))return!1}else if(isNaN(r.v=parseFloat(t)))return!1;if(a)if(t=e.substring(e.lastIndexOf(",")+1,e.lastIndexOf(")")),"%"==t.charAt(t.length-1)){if(isNaN(r.a=parseFloat(t)/100))return!1}else if(isNaN(r.a=parseFloat(t)))return!1}return r},e.fn.wheelColorPicker.hsvToRgb=function(e,t,a){var r=1/6>=e||e>=5/6?1:1/3>e?1-6*(e-1/6):e>4/6?6*(e-4/6):0,s=e>=1/6&&.5>=e?1:1/6>e?6*e:4/6>e?1-6*(e-.5):0,i=e>=.5&&5/6>=e?1:e>2/6&&.5>e?6*(e-2/6):e>5/6?1-6*(e-5/6):0,l=(r+(1-r)*(1-t))*a,n=(s+(1-s)*(1-t))*a,o=(i+(1-i)*(1-t))*a;return{r:l,g:n,b:o}},e.fn.wheelColorPicker.rgbToHsv=function(e,t,a){var r,s,i,l=Math.max(e,t,a),n=Math.min(e,t,a),o=l-n;return s=0!=l?o/l:0,r=0==o?0:e==l?(6+(t-a)/o)%6:t==l?2+(a-e)/o:a==l?4+(e-t)/o:0,r/=6,i=l,{h:r,s:s,v:i}},t.staticInit=function(){e.fn.wheelColorPicker.hasInit||(e.fn.wheelColorPicker.hasInit=!0,s=e('<div id="jQWCP-overlay" style="display: none;"></div>'),e("body").append(s),s.on("click",a.onOverlayClick),e("body").on("mouseup.wheelColorPicker",a.onBodyMouseUp),e("body").on("touchend.wheelColorPicker",a.onBodyMouseUp),e("body").on("mousemove.wheelColorPicker",a.onBodyMouseMove),e("body").on("touchmove.wheelColorPicker",a.onBodyMouseMove))},t.init=function(){return t.staticInit(),this.each(function(){var s=e(this),i=s.data("jQWCP.settings"),l=null;if(!i.hasInit){i.hasInit=!0;var n={h:0,s:0,v:1,r:1,g:1,b:1,a:1};s.data("jQWCP.color",n),null==i.sliders&&(i.sliders="wvp"+(i.format.indexOf("a")>=0?"a":"")),"block"==i.layout?(l=a.initWidget.call(s),l.addClass(i.cssClass),s.data("jQWCP.widget",l.get(0)),l.data("jQWCP.inputElm",this),l.addClass("jQWCP-block"),s.after(l),"inline"==s.css("display")?l.css("display","inline-block"):l.css("display",s.css("display")),l.append(s),a.adjustWidget(l.get(0),i),s.hide(),void 0!=s.attr("tabindex")?l.attr("tabindex",s.attr("tabindex")):l.attr("tabindex",0),t.redrawSliders.call(s,null,!0),t.updateSliders.call(s),l.on("focus.wheelColorPicker",a.onWidgetFocus),l.on("blur.wheelColorPicker",a.onWidgetBlur)):(null==r?(l=a.initWidget.call(s),s.data("jQWCP.widget",l.get(0)),r=l,r.hide(),e("body").append(l),l.on("mousedown.wheelColorPicker",a.onPopupDlgMouseDown),l.on("mouseup.wheelColorPicker",a.onPopupDlgMouseUp)):s.data("jQWCP.widget",r),s.on("focus.wheelColorPicker",t.show),s.on("blur.wheelColorPicker",a.onInputBlur)),s.on("keyup.wheelColorPicker",a.onInputKeyup),s.on("change.wheelColorPicker",a.onInputChange),null==i.color?t.setValue.call(s,s.val()):"object"==typeof i.color?(t.setColor.call(s,i.color),i.color=void 0):(t.setValue.call(s,i.color),i.color=void 0),i.userinput?s.removeAttr("readonly"):s.attr("readonly",!0)}})},t.setOptions=function(a){var r=a;return this.each(function(){var t=e(this),s=this;a=e.extend({},r),"undefined"==typeof a.htmlOptions&&(a.htmlOptions=e.fn.wheelColorPicker.defaults.htmlOptions),a.htmlOptions&&e.each(e.fn.wheelColorPicker.defaults,function(e,r){s.hasAttribute("data-wcp-"+e)&&(a[e]=t.attr("data-wcp-"+e))});var i=e.extend(!0,{},e.fn.wheelColorPicker.defaults,a);t.data("jQWCP.settings",i)}),t.init.call(this)},t.destroy=function(){return this.each(function(){var t=e(this),a=t.data("jQWCP.settings"),s=null;a&&("block"==a.layout?(s=e(t.data("jQWCP.widget")),s.before(t),s.remove(),t.show()):s=r,t.off("focus.wheelColorPicker"),t.off("blur.wheelColorPicker"),t.off("keyup.wheelColorPicker"),t.off("change.wheelColorPicker"),t.data("jQWCP.settings",null),t.data("jQWCP.widget",null))})},t.show=function(n){var o=e(this),d=o.data("jQWCP.settings"),h=r;"popup"==d.layout&&this!=o.data("jQWCP.inputElm")&&(h.stop(!0,!0),h.css({top:o.offset().top+o.outerHeight()+"px",left:o.offset().left+"px"}),l&&h.css({top:o.get(0).getBoundingClientRect().top-i.top+o.outerHeight()+"px",left:o.get(0).getBoundingClientRect().left-i.left+"px"}),h.data("jQWCP.inputElm",this),h.attr("class","jQWCP-wWidget"),h.addClass(d.cssClass),a.adjustWidget(h.get(0),d),t.redrawSliders.call(o,null,!0),t.updateSliders.call(o),d.lastValue=o.val(),h.fadeIn(d.animDuration),d.hideKeyboard&&(o.blur(),s.show()))},t.hide=function(t){var a=e(this),s=a.data("jQWCP.settings");r.fadeOut(s.animDuration)},t.redrawSliders=function(t,a){return this.each(function(){var t=e(this),r=t.data("jQWCP.settings"),s=e(t.data("jQWCP.widget")),i=t.data("jQWCP.color");if(this==s.data("jQWCP.inputElm")){var l=r.sliderWidth,n=50*r.quality,o=1,d=0,h=0,u=0,c=0,C=0,f=1;r.live&&(o=i.a,d=Math.round(255*i.r),h=Math.round(255*i.g),u=Math.round(255*i.b),c=i.h,C=i.s,f=i.v);var p=s.find(".jQWCP-wPreviewBox"),g=p.get(0).getContext("2d");if(g.fillStyle="rgba("+d+","+h+","+u+","+o+")",g.clearRect(0,0,l,n),g.fillRect(0,0,l,n),r.live||a){var P=s.find(".jQWCP-wAlphaSlider"),v=P.get(0).getContext("2d"),w=v.createLinearGradient(0,0,0,n);w.addColorStop(0,"rgba("+d+","+h+","+u+",1)"),w.addColorStop(1,"rgba("+d+","+h+","+u+",0)"),v.fillStyle=w,v.clearRect(0,0,l,n),v.fillRect(0,0,l,n);var W=s.find(".jQWCP-wRedSlider"),j=W.get(0).getContext("2d"),Q=j.createLinearGradient(0,0,0,n);Q.addColorStop(0,"rgb(255,"+h+","+u+")"),Q.addColorStop(1,"rgb(0,"+h+","+u+")"),j.fillStyle=Q,j.fillRect(0,0,l,n);var b=s.find(".jQWCP-wGreenSlider"),m=b.get(0).getContext("2d"),S=m.createLinearGradient(0,0,0,n);S.addColorStop(0,"rgb("+d+",255,"+u+")"),S.addColorStop(1,"rgb("+d+",0,"+u+")"),m.fillStyle=S,m.fillRect(0,0,l,n);var k=s.find(".jQWCP-wBlueSlider"),x=k.get(0).getContext("2d"),y=x.createLinearGradient(0,0,0,n);y.addColorStop(0,"rgb("+d+","+h+",255)"),y.addColorStop(1,"rgb("+d+","+h+",0)"),x.fillStyle=y,x.fillRect(0,0,l,n);var M=s.find(".jQWCP-wHueSlider"),O=M.get(0).getContext("2d"),N=O.createLinearGradient(0,0,0,n);N.addColorStop(0,"#f00"),N.addColorStop(.166666667,"#ff0"),N.addColorStop(.333333333,"#0f0"),N.addColorStop(.5,"#0ff"),N.addColorStop(.666666667,"#00f"),N.addColorStop(.833333333,"#f0f"),N.addColorStop(1,"#f00"),O.fillStyle=N,O.fillRect(0,0,l,n);var R=e.fn.wheelColorPicker.hsvToRgb(c,1,f);R.r=Math.round(255*R.r),R.g=Math.round(255*R.g),R.b=Math.round(255*R.b);var I=s.find(".jQWCP-wSatSlider"),B=I.get(0).getContext("2d"),E=B.createLinearGradient(0,0,0,n);E.addColorStop(0,"rgb("+R.r+","+R.g+","+R.b+")"),E.addColorStop(1,"rgb("+Math.round(255*f)+","+Math.round(255*f)+","+Math.round(255*f)+")"),B.fillStyle=E,B.fillRect(0,0,l,n);var A=e.fn.wheelColorPicker.hsvToRgb(c,C,1);A.r=Math.round(255*A.r),A.g=Math.round(255*A.g),A.b=Math.round(255*A.b);var H=s.find(".jQWCP-wValSlider"),G=H.get(0).getContext("2d"),V=G.createLinearGradient(0,0,0,n);V.addColorStop(0,"rgb("+A.r+","+A.g+","+A.b+")"),V.addColorStop(1,"#000"),G.fillStyle=V,G.fillRect(0,0,l,n)}}})},t.updateSliders=function(){return this.each(function(){var t=e(this),a=t.data("jQWCP.settings"),r=e(t.data("jQWCP.widget")),s=t.data("jQWCP.color");if(this==r.data("jQWCP.inputElm")){var i=r.find(".jQWCP-wWheel"),l=r.find(".jQWCP-wWheelCursor"),n=r.find(".jQWCP-wWheelOverlay"),o=Math.cos(2*Math.PI*s.h)*s.s,d=Math.sin(2*Math.PI*s.h)*s.s,h=i.width()/2,u=i.height()/2;l.css("left",h+o*i.width()/2+"px"),l.css("top",u-d*i.height()/2+"px"),a.preserveWheel?n.css("opacity",0):n.css("opacity",1-(s.v<.2?.2:s.v));var c=r.find(".jQWCP-wHueSlider"),C=r.find(".jQWCP-wHueCursor");C.css("top",s.h*c.height()+"px");var f=r.find(".jQWCP-wSatSlider"),p=r.find(".jQWCP-wSatCursor");p.css("top",(1-s.s)*f.height()+"px");var g=r.find(".jQWCP-wValSlider"),P=r.find(".jQWCP-wValCursor");P.css("top",(1-s.v)*g.height()+"px");var v=r.find(".jQWCP-wRedSlider"),w=r.find(".jQWCP-wRedCursor");w.css("top",(1-s.r)*v.height()+"px");var W=r.find(".jQWCP-wGreenSlider"),j=r.find(".jQWCP-wGreenCursor");j.css("top",(1-s.g)*W.height()+"px");var Q=r.find(".jQWCP-wBlueSlider"),b=r.find(".jQWCP-wBlueCursor");b.css("top",(1-s.b)*Q.height()+"px");var m=r.find(".jQWCP-wAlphaSlider"),S=r.find(".jQWCP-wAlphaCursor");S.css("top",(1-s.a)*m.height()+"px")}})},t.updateSelection=function(){return t.redrawSliders.call($this),t.updateSliders.call($this)},t.setRgba=function(a,r,s,i){return this.each(function(){var t=e(this),l=t.data("jQWCP.color");l.r=a,l.g=r,l.b=s,null!=i&&(l.a=i);var n=e.fn.wheelColorPicker.rgbToHsv(a,r,s);l.h=n.h,l.s=n.s,l.v=n.v}),t.updateSliders.call(this,"hsv"),t.redrawSliders.call(this,"svrgba")},t.setRgb=function(e,a,r){return t.setRgba.call(this,e,a,r,null)},t.setHsva=function(a,r,s,i){return this.each(function(){var t=e(this),l=t.data("jQWCP.color");l.h=a,l.s=r,l.v=s,null!=i&&(l.a=i);var n=e.fn.wheelColorPicker.hsvToRgb(a,r,s);l.r=n.r,l.g=n.g,l.b=n.b}),t.updateSliders.call(this,"rgb"),t.redrawSliders.call(this,"svrgba")},t.setHsv=function(e,a,r){return t.setHsva.call(this,e,a,r,null)},t.setAlpha=function(a){return this.each(function(){var t=e(this),r=t.data("jQWCP.color");r.a=a}),t.redrawSliders.call(this,"")},t.alpha=function(t){var a=this.data("jQWCP.settings");if(null==t)return-1==a.sliders.indexOf("a")?!1:!0;if(1==t){if(-1==a.sliders.indexOf("a"))return this.each(function(){var t=e(this),a=t.data("jQWCP.settings");a.sliders+="a"})}else if(0==t)return this.each(function(){var t=e(this),a=t.data("jQWCP.settings");a.sliders.replace("a","")})},t.color=function(e){return null==e?t.getValue.call(this):t.setValue.call(this,e)},t.getColor=function(){return this.data("jQWCP.color")},t.setColor=function(e){return null!=e.r?t.setRgba.call(this,e.r,e.g,e.b,e.a):null!=e.h?t.setHsva.call(this,e.h,e.s,e.v,e.a):null!=e.a?t.setAlpha.call(this,e.a):this},t.getValue=function(t){var a=this.data("jQWCP.settings"),r=this.data("jQWCP.color");return null==t&&(t=a.format),a.rounding>=0&&(r.a=Math.round(r.a*Math.pow(10,a.rounding))/Math.pow(10,a.rounding)),e.fn.wheelColorPicker.colorToStr(r,t)},t.setValue=function(a){var r=e.fn.wheelColorPicker.strToColor(a);return r?t.setColor.call(this,r):this},a.initWidget=function(t){var r=this.data("jQWCP.settings"),s=r.sliderWidth,i=50*r.quality,l=e("<div class='jQWCP-wWidget'><div class='jQWCP-wWheelGroup'><div class='jQWCP-wWheel'><div class='jQWCP-wWheelOverlay'></div><span class='jQWCP-wWheelCursor'></span></div></div><div class='jQWCP-wHSVGroup'><div class='jQWCP-wHue jQWCP-slider-wrapper'><canvas class='jQWCP-wHueSlider jQWCP-slider' width='"+s+"' height='"+i+"' title='Hue'></canvas><span class='jQWCP-wHueCursor jQWCP-scursor'></span></div><div class='jQWCP-wSat jQWCP-slider-wrapper'><canvas class='jQWCP-wSatSlider jQWCP-slider' width='"+s+"' height='"+i+"' title='Saturation'></canvas><span class='jQWCP-wSatCursor jQWCP-scursor'></span></div><div class='jQWCP-wVal jQWCP-slider-wrapper'><canvas class='jQWCP-wValSlider jQWCP-slider' width='"+s+"' height='"+i+"' title='Value'></canvas><span class='jQWCP-wValCursor jQWCP-scursor'></span></div></div><div class='jQWCP-wRGBGroup'><div class='jQWCP-wRed jQWCP-slider-wrapper'><canvas class='jQWCP-wRedSlider jQWCP-slider' width='"+s+"' height='"+i+"' title='Red'></canvas><span class='jQWCP-wRedCursor jQWCP-scursor'></span></div><div class='jQWCP-wGreen jQWCP-slider-wrapper'><canvas class='jQWCP-wGreenSlider jQWCP-slider' width='"+s+"' height='"+i+"' title='Green'></canvas><span class='jQWCP-wGreenCursor jQWCP-scursor'></span></div><div class='jQWCP-wBlue jQWCP-slider-wrapper'><canvas class='jQWCP-wBlueSlider jQWCP-slider' width='"+s+"' height='"+i+"' title='Blue'></canvas><span class='jQWCP-wBlueCursor jQWCP-scursor'></span></div></div><div class='jQWCP-wAlpha jQWCP-slider-wrapper'><canvas class='jQWCP-wAlphaSlider jQWCP-slider' width='"+s+"' height='"+i+"' title='Alpha'></canvas><span class='jQWCP-wAlphaCursor jQWCP-scursor'></span></div><div class='jQWCP-wPreview'><canvas class='jQWCP-wPreviewBox' width='"+s+"' height='"+i+"' title='Selected Color'></canvas></div></div>");return l.find(".jQWCP-wWheel, .jQWCP-slider-wrapper, .jQWCP-scursor, .jQWCP-slider").attr("unselectable","on").css("-moz-user-select","none").css("-webkit-user-select","none").css("user-select","none").css("-webkit-touch-callout","none"),l.on("contextmenu.wheelColorPicker",function(){return!1}),l.on("mousedown.wheelColorPicker",".jQWCP-wWheel",a.onWheelMouseDown),l.on("touchstart.wheelColorPicker",".jQWCP-wWheel",a.onWheelMouseDown),l.on("mousedown.wheelColorPicker",".jQWCP-wWheelCursor",a.onWheelCursorMouseDown),l.on("touchstart.wheelColorPicker",".jQWCP-wWheelCursor",a.onWheelCursorMouseDown),l.on("mousedown.wheelColorPicker",".jQWCP-slider",a.onSliderMouseDown),l.on("touchstart.wheelColorPicker",".jQWCP-slider",a.onSliderMouseDown),l.on("mousedown.wheelColorPicker",".jQWCP-scursor",a.onSliderCursorMouseDown),l.on("touchstart.wheelColorPicker",".jQWCP-scursor",a.onSliderCursorMouseDown),l},a.adjustWidget=function(t,a){var r=e(t),s=a.sliders;s.indexOf("w")<0?r.find(".jQWCP-wWheel").hide().addClass("hidden"):r.find(".jQWCP-wWheel").show().removeClass("hidden"),s.indexOf("h")<0?r.find(".jQWCP-wHue").hide().addClass("hidden"):r.find(".jQWCP-wHue").show().removeClass("hidden"),s.indexOf("h")<0?r.find(".jQWCP-wHue").hide().addClass("hidden"):r.find(".jQWCP-wHue").show().removeClass("hidden"),s.indexOf("s")<0?r.find(".jQWCP-wSat").hide().addClass("hidden"):r.find(".jQWCP-wSat").show().removeClass("hidden"),s.indexOf("v")<0?r.find(".jQWCP-wVal").hide().addClass("hidden"):r.find(".jQWCP-wVal").show().removeClass("hidden"),s.indexOf("r")<0?r.find(".jQWCP-wRed").hide().addClass("hidden"):r.find(".jQWCP-wRed").show().removeClass("hidden"),s.indexOf("g")<0?r.find(".jQWCP-wGreen").hide().addClass("hidden"):r.find(".jQWCP-wGreen").show().removeClass("hidden"),s.indexOf("b")<0?r.find(".jQWCP-wBlue").hide().addClass("hidden"):r.find(".jQWCP-wBlue").show().removeClass("hidden"),s.indexOf("a")<0?r.find(".jQWCP-wAlpha").hide().addClass("hidden"):r.find(".jQWCP-wAlpha").show().removeClass("hidden"),s.indexOf("p")<0?r.find(".jQWCP-wPreview").hide().addClass("hidden"):r.find(".jQWCP-wPreview").show().removeClass("hidden");var i=r.find(".jQWCP-wWheel, .jQWCP-slider-wrapper, .jQWCP-wPreview").not(".hidden"),l=0;i.each(function(t,a){l+=parseFloat(e(a).css("margin-left").replace("px",""))+e(a).outerWidth()}),r.css({width:l+"px"})},a.onPopupDlgMouseDown=function(t){var a=e(this),r=e(a.data("jQWCP.inputElm"));if(r.off("blur.wheelColorPicker"),r.off("focus.wheelColorPicker"),void 0!=r.data("events"))var s=r.data("events").blur;else var s=void 0;var i={blur:[]};if(void 0!=s)for(var l=0;l<s.length;l++)i.blur.push(s[l]);r.data("jQWCP.suspendedEvents",i)},a.onPopupDlgMouseUp=function(t){var a=e(this),r=e(a.data("jQWCP.inputElm")),s=r.data("jQWCP.settings");s.hideKeyboard||r.trigger("focus.jQWCP_DONT_TRIGGER_EVENTS")},a.onWheelMouseDown=function(t){var a=e(this),r=a.parents(".jQWCP-wWidget:eq(0)"),s=e(r.data("jQWCP.inputElm"));e("body").data("jQWCP.activeControl",a.get(0)),s.trigger("sliderdown")},a.onWheelCursorMouseDown=function(t){var a=e(this),r=a.parents(".jQWCP-wWidget:eq(0)");e(r.data("jQWCP.inputElm"));e("body").data("jQWCP.activeControl",a.parent().get(0))},a.onSliderMouseDown=function(t){var a=e(this),r=a.parents(".jQWCP-wWidget:eq(0)"),s=e(r.data("jQWCP.inputElm"));e("body").data("jQWCP.activeControl",a.parent().get(0)),s.trigger("sliderdown")},a.onSliderCursorMouseDown=function(t){var a=e(this),r=a.parents(".jQWCP-wWidget:eq(0)");e(r.data("jQWCP.inputElm"));e("body").data("jQWCP.activeControl",a.parent().get(0))},a.onBodyMouseUp=function(r){var s=e(e("body").data("jQWCP.activeControl"));if(0!=s.length){var i=s.parents(".jQWCP-wWidget:eq(0)"),l=e(i.data("jQWCP.inputElm")),n=l.data("jQWCP.settings");if(void 0!=r.pageX&&a.updateActiveControl(r),"popup"==n.layout){n.hideKeyboard||l.trigger("focus.jQWCP_DONT_TRIGGER_EVENTS"),l.on("blur.wheelColorPicker",a.onInputBlur),l.on("focus.wheelColorPicker",t.show);for(var o=l.data("jQWCP.suspendedEvents"),d=o.blur,h=0;h<d.length;h++)l.on("blur"+(""==d[h].namespace?"":"."+d[h].namespace),d[h].handler)}e("body").data("jQWCP.activeControl",null),l.trigger("sliderup")}},a.onBodyMouseMove=function(t){var r=e(e("body").data("jQWCP.activeControl"));if(0!=r.length){t.preventDefault();var s=r.parents(".jQWCP-wWidget:eq(0)"),i=e(s.data("jQWCP.inputElm"));return a.updateActiveControl(t),i.trigger("slidermove"),!1}},a.updateActiveControl=function(a){var r=e(e("body").data("jQWCP.activeControl"));if(0!=r.length){var s=r.parents(".jQWCP-wWidget:eq(0)"),n=e(s.data("jQWCP.inputElm")),o=n.data("jQWCP.settings"),d=n.data("jQWCP.color");if(void 0==a.pageX&&a.originalEvent.touches.length>0&&(a.pageX=a.originalEvent.touches[0].pageX,a.pageY=a.originalEvent.touches[0].pageY),e("#log").html(a.pageX+"/"+a.pageY),r.hasClass("jQWCP-wWheel")){var h=r.find(".jQWCP-wWheelCursor"),u=(r.find(".jQWCP-wWheelOverlay"),(a.pageX-r.offset().left-r.width()/2)/(r.width()/2)),c=-(a.pageY-r.offset().top-r.height()/2)/(r.height()/2);if(l)var u=(a.pageX-(r.get(0).getBoundingClientRect().left-i.left)-r.width()/2)/(r.width()/2),c=-(a.pageY-(r.get(0).getBoundingClientRect().top-i.top)-r.height()/2)/(r.height()/2);var C=Math.sqrt(Math.pow(u,2)+Math.pow(c,2));C>1&&(C=1),o.snap&&C<o.snapTolerance&&(C=0);var f=0==u&&0==c?0:Math.atan(c/u)/(2*Math.PI);0>f&&(f+=.5),0>c&&(f+=.5),t.setHsv.call(n,f,C,d.v)}else if(r.hasClass("jQWCP-slider-wrapper")){var h=r.find(".jQWCP-scursor"),c=(a.pageY-r.offset().top)/r.height();if(l)var c=(a.pageY-(r.get(0).getBoundingClientRect().top-i.top))/r.height();var p=0>c?0:c>1?1:c;o.snap&&p<o.snapTolerance?p=0:o.snap&&p>1-o.snapTolerance&&(p=1),o.snap&&p>.5-o.snapTolerance&&p<.5+o.snapTolerance&&(p=.5),h.css("top",p*r.height()+"px"),r.hasClass("jQWCP-wRed")&&t.setRgb.call(n,1-p,d.g,d.b),r.hasClass("jQWCP-wGreen")&&t.setRgb.call(n,d.r,1-p,d.b),r.hasClass("jQWCP-wBlue")&&t.setRgb.call(n,d.r,d.g,1-p),r.hasClass("jQWCP-wHue")&&t.setHsv.call(n,p,d.s,d.v),r.hasClass("jQWCP-wSat")&&t.setHsv.call(n,d.h,1-p,d.v),r.hasClass("jQWCP-wVal")&&t.setHsv.call(n,d.h,d.s,1-p),r.hasClass("jQWCP-wAlpha")&&t.setAlpha.call(n,1-p)}n.val(t.getValue.call(n)),o.preview&&(n.css("background",e.fn.wheelColorPicker.colorToStr(d,"rgba")),d.v>.5?n.css("color","black"):n.css("color","white"))}},a.onInputChange=function(a){var r=e(this),s=e.fn.wheelColorPicker.strToColor(r.val());s&&t.setColor.call(r,s)},a.onInputKeyup=function(e){a.onInputChange.call(this,e)},a.onInputBlur=function(a){var r=e(this),s=r.data("jQWCP.settings"),i=s.lastValue,l=r.val();s.hideKeyboard||(i!=l&&r.trigger("change"),"popup"==s.layout&&t.hide.call(r))},a.onWidgetFocus=function(t){var a=e(e(this).data("jQWCP.inputElm")),r=(e(this),a.data("jQWCP.settings"));r.lastValue=a.val(),a.triggerHandler("focus")},a.onWidgetBlur=function(t){var r=e(e(this).data("jQWCP.inputElm"));e(this);a.onInputBlur.call(r),r.triggerHandler("blur")},a.onOverlayClick=function(a){var s=r.data("jQWCP.inputElm");if(null!=r&&null!=r.data("jQWCP.inputElm")){var i=e(s),l=i.data("jQWCP.settings"),n=l.lastValue,o=i.val();n!=o&&i.trigger("change"),t.hide.call(i)}e(this).hide()},e(document).ready(function(){e("[data-wheelcolorpicker]").wheelColorPicker({htmlOptions:!0})}),function(){void 0!=e.browser&&e.browser.mozilla&&(e.fn.wheelColorPicker.defaults.quality=.2),navigator.userAgent.indexOf("Firefox/3.6")>=0&&(e.fn.wheelColorPicker.defaults.sliderWidth=50),e(document).ready(function(){e("body").append('<div id="jQWCP-PageOrigin" style="position: absolute; top: 0; left: 0; height: 0; width: 0;"></div>'),e(window).on("scroll.jQWCP_RelativePageOriginBugFix",function(){var e=document.getElementById("jQWCP-PageOrigin").getBoundingClientRect();i=e,(0!=e.left||0!=e.top)&&(l=!0)})})}()}(jQuery);
